// Create an array to store the active devices
const activeDevices = [];

// Function to ping an IP address
function pingIP(ip) {
  return new Promise((resolve, reject) => {
    const ping = new Ping();

    ping.ping(ip, (err, data) => {
      if (err) {
        reject(err);
      } else {
        resolve(data);
      }
    });
  });
}

// Function to check a range of IP addresses
async function checkIPRange(startIP, endIP) {
  const ipParts = startIP.split('.');
  const start = parseInt(ipParts[3]);
  const end = parseInt(endIP.split('.')[3]);

  for (let i = start; i <= end; i++) {
    const ip = `${ipParts[0]}.${ipParts[1]}.${ipParts[2]}.${i}`;
    try {
      const data = await pingIP(ip);
      activeDevices.push({ ip, data });
    } catch (err) {
      // Handle error or ignore if the device is not active
    }
  }

  // Display the active devices
  console.log(activeDevices);
}

// Usage
checkIPRange('192.168.0.1', '192.168.0.255');
